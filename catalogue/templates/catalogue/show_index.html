{% extends 'base.html' %}
{% load static %}

{% block title %}Liste des spectacles{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.18/css/jquery.dataTables.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.2/css/responsive.dataTables.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.18/css/dataTables.bootstrap4.min.css"/>

<style>
    #page-content-wrapper { margin: 1em auto; max-width: 1000px; width: 95%; font: 14px/1.5 sans-serif; }
    .wrapper { padding: 20px; }
</style>
{% endblock %}

{% block content %}
<div class="wrapper">
    <h2 class="mb-4">Liste des spectacles</h2>

    <table id="table_shows" class="display table table-striped table-bordered dt-responsive nowrap" style="width:100%">
        <thead>
            <tr>
                <th>Titre</th>
                <th>Lieu</th>
                <th>Représentations</th>
                <th>Prix</th>
                <th>Réservable</th>
            </tr>
        </thead>
        <tbody>
            {% for show in shows %}
            <tr>
                <td>
                    <a href="{% url 'catalogue:show_detail' show.id %}">
                        {{ show.title|title }}
                    </a>
                </td>
                <td>{{ show.location.designation }}</td>
                <td>{{ show.representations.count }}</td>
                <td>{{ show.price }} &nbsp;&euro;</td>
                <td>
                    {% if show.bookable %}
                        <span class="badge badge-success">Oui</span>
                    {% else %}
                        <span class="badge badge-danger">Non</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <p class="mt-3 text-muted">Total: {{ shows|length }} spectacles.</p>
</div>
{% endblock %}

{% block javascripts %}
<script type="text/javascript" src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.18/js/dataTables.bootstrap4.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.2/js/dataTables.responsive.min.js"></script>

<script>
    $(document).ready(function() {
        $('#table_shows').DataTable({
            "responsive": true,
            "pageLength": 10,
            "language": {
                "url": "//cdn.datatables.net/plug-ins/1.10.18/i18n/French.json"
            }
        });
    });
</script>
{% endblock %}