{% extends "base.html" %}

{% block title %}{{ show.title }}{% endblock %}

{% block content %}
    <article>
        <h1>{{ show.title }}</h1>

        <div style="display: flex; gap: 20px;">
            {# Affichage de l'affiche si elle existe #}
            {% if show.poster_url %}
            <div class="show-poster">
                <img src="{% static 'images/' %}{{ show.poster_url }}" alt="{{ show.title }}" style="max-width: 300px; border-radius: 8px;">
            </div>
            {% endif %}

            <div class="show-info">
                <p><strong>Description :</strong> {{ show.description }}</p>
                <p><strong>Prix :</strong> {{ show.price }} ‚Ç¨</p>
                
                <p><strong>Lieu :</strong> 
                    {% if show.location %}
                        {{ show.location.designation }} 
                        <br><small>{{ show.location.address }}, {{ show.location.locality.postal_code }} {{ show.location.locality.locality }}</small>
                    {% else %}
                        <em>Lieu non communiqu√©</em>
                    {% endif %}
                </p>

                <h3>üìÖ Dates des repr√©sentations</h3>
                <ul>
                    {# Ici on utilise le related_name 'representations' d√©fini dans ton models.py #}
                    {% for representation in show.representations.all %}
                        <li>{{ representation.when|date:"d F Y √† H:i" }}</li>
                    {% empty %}
                        <li><em>Aucune repr√©sentation pr√©vue pour le moment.</em></li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <p style="margin-top: 30px;">
            <a href="{% url 'catalogue:show_index' %}" class="btn">‚¨Ö Retour √† la liste des spectacles</a>
        </p>
    </article>
{% endblock %}